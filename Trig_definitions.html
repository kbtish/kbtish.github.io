<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Basic Trigonometry - Function Definitions</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<style type='text/css'>
    body {
        color: white;
        background-color: blue;
    }
    
    .center {
        margin: auto;
        width: 60%;
        border: 3px solid;
        padding: 10px;
    }
    
    a:link  {color:white;}
    a:visited   {color:pink;}
</style>
<script type="text/javascript">
    /* <![CDATA[ */
    
    // global variables
    var inputString = ''; // holds the value input by the user
    // parts of the triangle
        var angle1;
        var angle2;
        var leg1;
        var leg2;
        var hypotenuse;
    var answer; // holds the answer
    var problem; // holds text for the problem
    
    // allow numberpad to type in answer
    function updateString(value) {
        inputString += value;
        document.forms[0].userAnswer.value = inputString;
    }
    
    // reset the form
    function clearAnswer() {
        document.forms[0].userAnswer.value = "";
        inputString = "";
    }
    
    // load a diagram
    function loadDiagram() {
        // randomly select which diagram to use
        var i = Math.floor(Math.random()*8 + 1); // random number between 1 and 8 inclusive        
        switch (i) { // which diagram is displayed? 
            case 1:
                document.images[0].src = 'pictures/trig triangles/diagram1.png';
                angle1 = 'A';
                angle2 = 'B';
                leg1 = 'a';
                leg2 = 'b';
                hypotenuse = 'c';
                break;
            case 2:
                document.images[0].src = 'pictures/trig triangles/diagram2.png';
                angle1 = 'E';
                angle2 = 'F';
                leg1 = 'e';
                leg2 = 'f';
                hypotenuse = 'd';
                break;
            case 3:
                document.images[0].src = 'pictures/trig triangles/diagram3.png';
                angle1 = 'Q';
                angle2 = 'R';
                leg1 = 'q';
                leg2 = 'r';
                hypotenuse = 'p';
                break;
            case 4:
                document.images[0].src = 'pictures/trig triangles/diagram4.png';
                angle1 = 'X';
                angle2 = 'Y';
                leg1 = 'x';
                leg2 = 'y';
                hypotenuse = 'z';
                break;
            case 5:
                document.images[0].src = 'pictures/trig triangles/diagram5.png';
                angle1 = '&theta;';
                angle2 = '&phi;';
                leg1 = 'a';
                leg2 = 'b';
                hypotenuse = 'c';
                break;
            case 6:
                document.images[0].src = 'pictures/trig triangles/diagram6.png';
                angle1 = '&theta;';
                angle2 = '&phi;';
                leg1 = 'a';
                leg2 = 'b';
                hypotenuse = 'c';
                break;
            case 7:
                document.images[0].src = 'pictures/trig triangles/diagram7.png';
                angle1 = '&theta;';
                angle2 = '&phi;';
                leg1 = 'a';
                leg2 = 'b';
                hypotenuse = 'c';
                break;
            case 8:
                document.images[0].src = 'pictures/trig triangles/diagram8.png';
                angle1 = '&theta;';
                angle2 = '&phi;';
                leg1 = 'a';
                leg2 = 'b';
                hypotenuse = 'c';
                break;
            default: // should not happen
                window.alert('Something went wrong.  Please reload the page.');
        }
    } // end of function loadDiagram()
    
    // put values on buttons
    function writeButtons() {
        document.forms[0].button1.value = leg1;
        document.forms[0].button2.value = leg2;
        document.forms[0].button3.value = hypotenuse;
    }
    
    // select which kind of problem to ask
    function selectType() {
        // local variables
        var numSelected = 0; // number of checkboxes selected for problem type
        var question = new Array(); // array to hold problem types
        var i; // will hold a random number
        
        // add checked operations to question array
        if (document.forms[0].type1.checked == true) {
            numSelected++;
            question[numSelected-1] = 'type1';
        }
        if (document.forms[0].type2.checked == true) {
            numSelected++;
            question[numSelected-1] = 'type2';
        }
        if (document.forms[0].type3.checked == true) {
            numSelected++;
            question[numSelected-1] = 'type3';
        }
        if (document.forms[0].type4.checked == true) {
            numSelected++;
            question[numSelected-1] = 'type4';
        }
        if (document.forms[0].type5.checked == true) {
            numSelected++;
            question[numSelected-1] = 'type5';
        }
        if (document.forms[0].type6.checked == true) {
            numSelected++;
            question[numSelected-1] = 'type6';
        }
        
        // make sure at least one type is selected
        if (numSelected == 0) {
            window.alert('Please select at least one problem type.');
        }
        
        // randomly select which problem type to display
        i = Math.floor(Math.random() * numSelected);
        if (question[i] == 'type1') {
            createType1();
        }
        if (question[i] == 'type2') {
            createType2();
        }
        if (question[i] == 'type3') {
            createType3();
        }
        if (question[i] == 'type4') {
            createType4();
        }
        if (question[i] == 'type5') {
            createType5();
        }
        if (question[i] == 'type6') {
            createType6();
        }
    } // end of function selectType()
    
    // create a problem asking the user to define the sine function
    function createType1() {
        // determine which angle to give
        var i = Math.floor(Math.random()*2);             
        switch (i) {
            case 0:
                problem = 'What is sin ' + angle1 + '?';
                answer = leg1 + '/' + hypotenuse;
                break;
            case 1:
                problem = 'What is sin ' + angle2 + '?';
                answer = leg2 + '/' + hypotenuse;
                break;
        }
        
        // display problem
        document.getElementById('problemSpace').innerHTML = problem;
    } // end of function createType1()
    
    // create a problem asking the user to define the cosine function
    function createType2() {
        // determine which angle to give
        var i = Math.floor(Math.random()*2);             
        switch (i) {
            case 0:
                problem = 'What is cos ' + angle1 + '?';
                answer = leg2 + '/' + hypotenuse;
                break;
            case 1:
                problem = 'What is cos ' + angle2 + '?';
                answer = leg1 + '/' + hypotenuse;
                break;
        }
        
        // display problem
        document.getElementById('problemSpace').innerHTML = problem;
    } // end of function createType2()    
    
    // create a problem asking the user to define the tangent function
    function createType3() {
        // determine which angle to give
        var i = Math.floor(Math.random()*2);             
        switch (i) {
            case 0:
                problem = 'What is tan ' + angle1 + '?';
                answer = leg1 + '/' + leg2;
                break;
            case 1:
                problem = 'What is tan ' + angle2 + '?';
                answer = leg2 + '/' + leg1;
                break;
        }
        
        // display problem
        document.getElementById('problemSpace').innerHTML = problem;
    } // end of function createType3()
    
    // create a problem asking the user to define the cosecant function
    function createType4() {
        // determine which angle to give
        var i = Math.floor(Math.random()*2);             
        switch (i) {
            case 0:
                problem = 'What is csc ' + angle1 + '?';
                answer = hypotenuse + '/' + leg1;
                break;
            case 1:
                problem = 'What is csc ' + angle2 + '?';
                answer = hypotenuse + '/' + leg2;
                break;
        }
        
        // display problem
        document.getElementById('problemSpace').innerHTML = problem;
    } // end of function createType4()
    
    // create a problem asking the user to define the secant function
    function createType5() {
        // determine which angle to give
        var i = Math.floor(Math.random()*2);             
        switch (i) {
            case 0:
                problem = 'What is sec ' + angle1 + '?';
                answer = hypotenuse + '/' + leg2;
                break;
            case 1:
                problem = 'What is sec ' + angle2 + '?';
                answer = hypotenuse + '/' + leg1;
                break;
        }
        
        // display problem
        document.getElementById('problemSpace').innerHTML = problem;
    } // end of function createType5()
    
    // create a problem asking the user to define the cotangent function
    function createType6() {
        // determine which angle to give
        var i = Math.floor(Math.random()*2);             
        switch (i) {
            case 0:
                problem = 'What is cot ' + angle1 + '?';
                answer = leg2 + '/' + leg1;
                break;
            case 1:
                problem = 'What is cot ' + angle2 + '?';
                answer = leg1 + '/' + leg2;
                break;
        }
        
        // display problem
        document.getElementById('problemSpace').innerHTML = problem;
    } // end of function createType6()
    
    // check the answer and give feedback
    function checkAnswer() {
        // make sure the user has input an answer
        if (document.forms[0].userAnswer.value == '') { // input is blank
            document.getElementById('repeatAnswer').innerHTML = 'Type an answer in the box above.';
            document.getElementById('feedback').innerHTML = '<br />';
            document.forms[0].userAnswer.focus(); // set focus to input box
            return false;
        }
        
        // display user's answer
        document.getElementById('repeatAnswer').innerHTML = 'Your answer: ' +
                                                            document.forms[0].userAnswer.value;
        
        // check the answer and give appropriate feedback
        if (document.forms[0].userAnswer.value == answer) { // answer is correct
            if (document.forms[0].playVideo.checked == true) {
                playCorrectAnswer();
            }
            document.getElementById('feedback').innerHTML = 'Correct!';
            document.forms[0].newProblem.focus();
        }
        else { // answer is incorrect
            if (document.forms[0].playVideo.checked == true) {
                playWrongAnswer();
            }
            document.getElementById('feedback').innerHTML = 'Not quite.  Try again.';
            document.forms[0].userAnswer.focus();
        }
        return false;
    } // end of function checkAnswer()
    
    // show the answer if the user is stuck
    function showAnswer() {
        document.getElementById('answer').innerHTML = 'Answer: ' + answer;
    }
    
    // clear all text and input
    function clearPage() {
        clearAnswer();
        document.getElementById('repeatAnswer').innerHTML = '&nbsp;';
        document.getElementById('feedback').innerHTML = '&nbsp;';
        document.getElementById('answer').innerHTML = '&nbsp;';        
    }
    // call the necessary functions when the page is loaded or reloaded
    function loadPage() {
        loadDiagram(); // choose a diagram for the problem
        document.forms[0].userAnswer.focus(); // set focus to input box
        selectType();
        clearPage();
        resetVideoFrame();
        writeButtons();
    }
    
    // close the page
    // APPEARS TO NOT WORK IN FIREFOX!!!
    function closePage() {
        if (document.forms[0].playVideo.checked == true) {
            // let user know that the request is being processed
            document.getElementById('closingMessage').innerHTML = 'closing...';
            
            // load video for the page closing
            document.getElementById('videoSpace').innerHTML =
                '<video id="noMore" width="240" height="132">' +
                    '<source src="files/no more.mp4" type="video/mp4"></source>' +
                '</video>';
            noMore.play();
            
            noMore.onended = function() { // when the video ends
                window.open("","_self").close(); // close the window
                window.alert('Operation failed'); // if the window doesn't close
                document.getElementById('closingMessage').innerHTML = ''; // reset text
            }
        }
        else {
            window.open("","_self").close(); // close the window
            window.alert('Operation failed'); // if the window doesn't close
        }
        
    }
    // video feedback for correct answers
    function playCorrectAnswer() {
        var numVideos = 2;
        var i = Math.floor(Math.random()*numVideos + 1);
        
        switch (i) {
            case 1:
                document.getElementById('videoSpace').innerHTML =
                    '<video id="reallyGoodAtMath" width="240" height="132">' +
                        '<source src="files/really good at math.mp4" type="video/mp4"></source>' +
                    '</video>';
                playVideo(reallyGoodAtMath);
                break;
            case 2:    
                document.getElementById('videoSpace').innerHTML =
                    '<video id="smrt" width="240" height="132">' +
                        '<source src="files/smrt.mp4" type="video/mp4"></source>' +
                    '</video>';
                playVideo(smrt);
                break;
            default:
                document.alert("There was an error playing the video feedback");
        }
    }
    // video feedback for wrong answers
    function playWrongAnswer() {
        var numVideos = 2;
        var i = Math.floor(Math.random()*numVideos + 1);
        
        switch (i) {
            case 1:
                document.getElementById('videoSpace').innerHTML =
                        '<video id="what" width="240" height="132">' +
                            '<source src="files/what.mp4" type="video/mp4"></source>' +
                        '</video>';
                playVideo(what);
                break;
            case 2:
                document.getElementById('videoSpace').innerHTML =
                    '<video id="notEvenClose" width="240" height="132">' +
                        '<source src="files/not even close.mp4" type="video/mp4"></source>' +
                    '</video>';
                playVideo(notEvenClose);
                break;
            default:
                document.alert("There was an error playing the video feedback");
        }
    }
    
    // play whichever video is called
    function playVideo(video) {
        video.play();
        video.onended = function() { // when the video ends
            resetVideoFrame();    
        }
    }
    
    // set or reset the video frame to blank
    function resetVideoFrame() {
        document.getElementById('videoSpace').innerHTML =
                '<video width="240" height="132"></video>';
    }
    /* ]]> */
</script>
</head>

<body id='page' onload='loadPage();'>
<div class='center'>
<form action=''>
    <table>
        <tr>
            <td>
                <h2>Basic Trigonometry - Function Definitions</h2>
                <br />
                <a href='index.html'>Home</a>
            </td>
        </tr>
        <tr>
            <td>
                <!-- prompt -->
                <br />
                Use the diagram to answer the question.
            </td>
        </tr>
        <tr>
            <td>
                <img src='' alt='diagram' style='width:260px;height:238px;'/>  
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <!-- left side of page follows... -->
            <td>
                <table>
                    <tr>
                        <td id='problemSpace'>
                            <!-- random problem -->
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <!-- input answer -->
                            <br />Use a slash ( / ) to make a fraction.<br />
                            Answer: 
                            <input type='text' name='userAnswer' size='3' />
                            <br /><br />
                            <!-- keypad -->
                            <input type='button' name='button1' style='width: 50px' value='' onclick='updateString(leg1);' />
                            <input type='button' name='button2' style='width: 50px' value='' onclick='updateString(leg2);' />
                            <input type='button' name='button3' style='width: 50px' value='' onclick='updateString(hypotenuse);' />
                            <br />
                            <input type='button' name='slash' style='width: 77px' value='/' onclick='updateString("/");' />
                            <input type='button' name='clear' style='width: 77px;' value='Clear' onclick='clearAnswer();' />
                            <br />
                            <br />
                            <input type='submit' value='Check my answer' style='width: 158px' onclick=' return checkAnswer();' />
                        </td>
                    </tr>
                    <tr>
                        <td id='repeatAnswer'>
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td id='feedback'>
                            <!-- feedback -->
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <!-- button to generate a new problem -->
                            <input type='button' name='newProblem' value='New problem' onclick='loadPage();' />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <!-- show correct answer -->
                            <input type='button' value='Show answer' onclick='showAnswer();' />
                        </td>
                    </tr>
                    <tr>
                        <td id='answer'>
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input name='changeMe' type='button' value='Close window' onclick='closePage();' />
                        </td>
                    </tr>
                    <tr>
                        <td id='closingMessage'>
                            &nbsp;
                        </td>
                    </tr>
                </table>
            </td>
            <!-- right side of page follows... -->
            <td style='width:38%;'>
                <table>
                    <tr>
                        <td style='border:solid;'>
                            Choose which function(s) to practice:<br />
                            <input type='checkbox' name='type1' checked='checked' />Sine<br />
                            <input type='checkbox' name='type2' checked='checked' />Cosine<br />
                            <input type='checkbox' name='type3' checked='checked' />Tangent<br />
                            <input type='checkbox' name='type4' />Cosecant<br />
                            <input type='checkbox' name='type5' />Secant<br />
                            <input type='checkbox' name='type6' />Cotangent<br />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <br/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type='checkbox' name='playVideo' />
                            Play video feedback
                        </td>
                    </tr>
                    <tr>
                        <td id='videoSpace' width='240' height='132'>
                            &nbsp;
                        </td>
                    </tr>
                </table> 
            </td>
        </tr>
    </table>
    <a href='index.html'>Home</a>
</form>
</div>
</body>
</html>